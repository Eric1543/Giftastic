<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Giftastic</title>
		<link rel="stylesheet" type="text/css" href="style.css">
		<link href="https://fonts.googleapis.com/css?family=Alfa+Slab+One|Bangers|Modak|Mogra|Orbitron|Paytone+One|Permanent+Marker|Pirata+One|Righteous|Russo+One" rel="stylesheet">
	</head>
	<body>
		<div class="container">
		<h1>Wrestling GIFS!</h1>
			<button style="margin-left:20px" type="text" id="addByClick">Add Your Wrestler!</button>
			<input style="padding-left:10px" type="text" id="addWrestler">
			<div id="wrestlerButtons">
			
			</div>
			<div id="viewGif">
			
			
			</div>

			<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
			<script type="text/javascript">

				// Starting array of wrestlers
				var wrestlers = ['Andre The Giant', 'John Cena', 'Big Poppa Pump', 'Brock Lesnar', 'Macho Man Randy Savage', 'Miss Elizabeth', 'Hulk Hogan', 'Booker T', 'Yokozuna'];

				// Visitors get to add their own wrestlers
				// Condition to add only 1 new button per click
				$('#addByClick').on('click', function(){
					if(wrestlers.indexOf($('#addWrestler').val().trim()) === -1){
						wrestlers.push($('#addWrestler').val().trim());
						displayButtons();
					}
				});

				
				// Search for and display wrestler GIFS
				function displayWrestlerGifs (){

				// Build up the url with a wrestler and a limit added to the search
				var wrestler = $(this).attr("data-name");
				var limit = 10;
				var gifUrl = 'http://api.giphy.com/v1/gifs/search?q=' + wrestler + '&limit=' + limit + '&api_key=dc6zaTOxFJmzC';


				$.ajax({
					url: gifUrl,
					method: "GET"
				}).done(function(response){

					// Store ajax JSON results
					var results = response.data;

					// Clear GIF area before displaying newly searched GIFS
					$('#viewGif').empty();

					// Loop over the results (Limit = 10)
					for(var i = 0; i < response.data.length; i++){
						
					

					var wrestlerDiv = $('<div>');
					var p = $('<p>');
					p.html = response.data[i].rating;
					var wrestlerImage = $('<img src=' + response.data[i].images.fixed_height.url + '>');
					
					wrestlerDiv.text = wrestler;
					wrestlerDiv.append(wrestlerImage);
 					
          			// Add new GIF to view GIF area appending per result
					$('#viewGif').append(wrestlerDiv);

					}
				});
        // for (var i = 0; i < results.length; i++) {

        // Step 3: uncomment the for loop above and the closing curly bracket below.
        // Make a div with jQuery and store it in a variable named animalDiv.
        // Make a paragraph tag with jQuery and store it in a variable named p.
        // Set the inner text of the paragraph to the rating of the image in results[i].
        // Make an image tag with jQuery and store it in a variable named animalImage.
        // Set the image's src to results[i]'s fixed_height.url.
        // Append the p variable to the animalDiv variable.
        // Append the animalImage variable to the animalDiv variable.
        // Prepend the animalDiv variable to the element with an id of gifs-appear-here.

				} // End of displaywrestlerGifs
// data = JSON.parse(request.responseText).data.image_url;

				// Render buttons per wrestler in array
				function displayButtons(){
					// Start by clearing buttons
					$('#wrestlerButtons').empty();

					// Rerender buttons per wrestler appending results
					for(var i in wrestlers){
						var a = $('<button>');
						a.addClass('wrestler');
          				a.attr("data-name", wrestlers[i]);
          				a.text(wrestlers[i]);;
						$('#wrestlerButtons').append(a);
					}
				}

				// All buttons have a wrestler class, so any one clicked will trigger displaywrestlerGifs();
				$(document).on('click', '.wrestler', displayWrestlerGifs)
				displayButtons();
			</script>
		</div>
	</body>
</html>